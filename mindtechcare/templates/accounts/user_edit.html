{% extends "base.html" %} {% load static %} {% block content %}
<section class="font-poppins flex min-h-screen items-center justify-center bg-gray-100">
  <div class="w-full max-w-lg rounded-2xl bg-white p-8 shadow-xl">
    <h2 class="mb-8 text-center text-3xl font-bold text-[#047857]">Editar Perfil</h2>

    <form method="post" enctype="multipart/form-data" class="formulario-login space-y-6">
      {% csrf_token %}

      <!-- Campo de imagem com preview estilizado -->
      <div class="flex flex-col items-center">
        <label class="mb-2 text-sm font-medium text-gray-700">Imagem de Perfil</label>

        <img src="{{ user.profile_image.url }}" id="preview" class="mb-4 h-32 w-32 rounded-full border border-gray-300 object-cover shadow-md" />

        <input type="file" name="profile_image" id="id_profile_image" accept="image/*" onchange="previewImage(event)" class="hidden" />

        <label for="id_profile_image" class="inline-block cursor-pointer rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition-all hover:bg-emerald-700"> <i class="fa-solid fa-upload mr-2 text-white"></i><span class="text-white">Escolher Imagem</span> </label>

        <p class="mt-1 text-xs text-gray-500">Clique no botão acima para selecionar uma imagem</p>
      </div>

      <!-- Demais campos do formulário -->
      {% for field in form %}
      <div>
        <label class="mb-1 block text-sm font-medium text-gray-700">{{ field.label }}</label>
        {{ field }} {% if field.errors %}
        <p class="mt-1 text-sm text-red-600">{{ field.errors }}</p>
        {% endif %}
      </div>
      {% endfor %}

      <!-- Ações -->
      <div class="flex items-center justify-between pt-4">
        <a href="{% url 'user_profile' %}" class="text-sm text-gray-500 hover:text-gray-700 hover:underline">Cancelar</a>
        <button type="submit" class="rounded-xl bg-primary px-6 py-2 font-semibold text-white transition-all hover:bg-[#064e3b]">Salvar Alterações</button>
      </div>
    </form>

    <script src="{% static 'js/previewImage.js' %}"></script>
  </div>
</section>
{% endblock content %}
